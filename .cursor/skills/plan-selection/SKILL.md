---
name: plan-selection
description: 从多个候选 plan 中根据用户初始输入（需求、目标、约束）选择最符合的方案。当用户提供多个 plan 并要求挑选、比较或选最优时使用。
---

# Plan 选择器

从多个候选 plan 中，根据用户**初始输入**（需求、目标、约束）选择最符合的那个。当用户提供多个 plan 并要求挑选、比较、或选最优方案时使用本 skill。

---

## 工作流程

### 1. 提取用户初始输入

从对话中识别用户的**核心诉求**，包括但不限于：

- **目标**：用户想达成什么
- **约束**：时间、技术栈、资源、兼容性等
- **优先级**：若有提及，如「首要」、「其次」
- **偏好**：如「尽量少改动」、「优先可维护性」

若初始输入不完整，可向用户简要确认关键点，再继续选择。

### 2. 列出候选 Plan

整理所有待选的 plan，确保每个 plan 的核心步骤、产出、假设清晰可见。可对 plan 编号（Plan A、Plan B 等）便于对比。

### 3. 评估维度与打分

对每个 plan 按下列维度打分（1–5 分，5 最高），并附简短理由：

| 维度 | 说明 |
|------|------|
| **覆盖度** | 是否覆盖用户目标与需求点 |
| **相关性** | 与初始输入的契合程度，有无偏离 |
| **可行性** | 现有资源下是否可执行 |
| **约束符合** | 是否满足时间、技术、资源等约束 |
| **副作用/风险** | 改动范围、侵入性、潜在风险 |

### 4. 输出选择结果

按以下格式输出：

```markdown
## 推荐 Plan：[Plan 编号/名称]

### 选择理由
[2–3 句说明为何该 plan 最符合初始输入]

### 各 Plan 简要对比

| Plan | 覆盖度 | 相关性 | 可行性 | 约束符合 | 风险 |
|------|--------|--------|--------|----------|------|
| A    | x/5    | x/5    | x/5    | x/5      | x/5  |
| B    | ...    | ...    | ...    | ...      | ...  |

### 备选与权衡
[若存在接近的备选，说明其优缺点及适用场景]
```

---

## 评估原则

- **以初始输入为准**：选择时优先贴合用户最初描述的需求和目标。
- **避免过度推断**：未明确的需求不擅自加入评估权重。
- **可量化尽量量化**：能用打分表达的尽量用分数，理由简短清晰。
- **承认不确定性**：若信息不足，可说明哪些判断基于假设，并建议用户补充。

---

## 示例

**用户初始输入**：「我想给现有项目加上 AI 对话功能，但要尽量少改动现有代码，两周内上线。」

**Plan A**：引入 Vercel AI SDK，在现有 API 路由上加 chat 端点  
**Plan B**：新建独立的 AI 微服务，通过 REST 调用  
**Plan C**：用 iframe 嵌入第三方 AI 对话产品

**评估示意**：

- Plan A：覆盖度高、改动小、贴合「少改动」；可行性取决于现有架构，假设可接受。
- Plan B：覆盖度高，但改动大、周期可能超两周，约束符合度低。
- Plan C：上线快，但可控性差，可能难以满足定制需求。

**推荐**：Plan A，并注明需确认现有 API 结构是否适合扩展。
